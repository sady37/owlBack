# Auth ç«¯ç‚¹ç«¯åˆ°ç«¯æµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•æ—¥æœŸ**ï¼š__________  
**æµ‹è¯•äººå‘˜**ï¼š__________  
**æµ‹è¯•ç¯å¢ƒ**ï¼š__________  
**æœåŠ¡åœ°å€**ï¼š`http://localhost:8080`

---

## ğŸš€ æµ‹è¯•å‡†å¤‡

### 1. æœåŠ¡å¯åŠ¨

```bash
cd /Users/sady3721/project/owlBack
docker-compose up -d wisefido-data
```

### 2. éªŒè¯æœåŠ¡çŠ¶æ€

```bash
curl http://localhost:8080/health
```

**ç»“æœ**ï¼šâœ… / âŒ

---

## ğŸ” æµ‹è¯•ç”¨ä¾‹

### 1. POST /auth/api/v1/login

#### 1.1 æˆåŠŸç™»å½•

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
./scripts/test_auth_endpoints.sh
```

æˆ–æ‰‹åŠ¨æµ‹è¯•ï¼š
```bash
curl -X POST http://localhost:8080/auth/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "00000000-0000-0000-0000-000000000001",
    "userType": "staff",
    "accountHash": "5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",
    "passwordHash": "8f434346648f6b96df89dda901c5176b10a6d83961dd3c1ac88b59b2dc327aa4"
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": {
    "accessToken": "...",
    "refreshToken": "...",
    "userId": "...",
    "user_account": "sysadmin",
    "userType": "staff",
    "role": "SystemAdmin",
    "nickName": "SystemAdmin",
    "tenant_id": "00000000-0000-0000-0000-000000000001",
    "tenant_name": "System",
    "domain": "system.local",
    "homePath": "/monitoring/overview"
  }
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 1.2 ç¼ºå°‘å‡­è¯

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/auth/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "00000000-0000-0000-0000-000000000001",
    "userType": "staff"
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": -1,
  "type": "error",
  "message": "missing credentials",
  "result": null
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 1.3 æ— æ•ˆå‡­è¯

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/auth/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "00000000-0000-0000-0000-000000000001",
    "userType": "staff",
    "accountHash": "0000000000000000000000000000000000000000000000000000000000000000",
    "passwordHash": "0000000000000000000000000000000000000000000000000000000000000000"
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": -1,
  "type": "error",
  "message": "invalid credentials",
  "result": null
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 2. GET /auth/api/v1/institutions/search

#### 2.1 æœç´¢æˆåŠŸ

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl "http://localhost:8080/auth/api/v1/institutions/search?accountHash=5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8&passwordHash=8f434346648f6b96df89dda901c5176b10a6d83961dd3c1ac88b59b2dc327aa4&userType=staff"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": [
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "System",
      "accountType": "account",
      "domain": "system.local"
    }
  ]
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 2.2 æ— åŒ¹é…

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl "http://localhost:8080/auth/api/v1/institutions/search?accountHash=0000000000000000000000000000000000000000000000000000000000000000&passwordHash=0000000000000000000000000000000000000000000000000000000000000000&userType=staff"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": []
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 3. å¯†ç é‡ç½®ç«¯ç‚¹ï¼ˆå¾…å®ç°ï¼‰

#### 3.1 POST /auth/api/v1/forgot-password/send-code

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X POST http://localhost:8080/auth/api/v1/forgot-password/send-code \
  -H "Content-Type: application/json" \
  -d '{
    "account": "sysadmin",
    "userType": "staff",
    "tenant_id": "00000000-0000-0000-0000-000000000001",
    "tenant_name": "System"
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": -1,
  "type": "error",
  "message": "database not available",
  "result": null
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

## ğŸ“Š æµ‹è¯•ç»Ÿè®¡

| æµ‹è¯•ç”¨ä¾‹ | çŠ¶æ€ | å¤‡æ³¨ |
|---------|------|------|
| POST /auth/api/v1/login - æˆåŠŸ | âœ…/âŒ | |
| POST /auth/api/v1/login - ç¼ºå°‘å‡­è¯ | âœ…/âŒ | |
| POST /auth/api/v1/login - æ— æ•ˆå‡­è¯ | âœ…/âŒ | |
| GET /auth/api/v1/institutions/search - æˆåŠŸ | âœ…/âŒ | |
| GET /auth/api/v1/institutions/search - æ— åŒ¹é… | âœ…/âŒ | |
| POST /auth/api/v1/forgot-password/send-code | âœ…/âŒ | |
| POST /auth/api/v1/forgot-password/verify-code | âœ…/âŒ | |
| POST /auth/api/v1/forgot-password/reset | âœ…/âŒ | |

**æ€»æµ‹è¯•æ•°**ï¼š8  
**é€šè¿‡**ï¼š__________  
**å¤±è´¥**ï¼š__________  
**é€šè¿‡ç‡**ï¼š__________%

---

## ğŸ” å‰ç«¯é›†æˆæµ‹è¯•

### 1. ç™»å½•é¡µé¢

- [ ] ç™»å½•è¡¨å•æ­£å¸¸æ˜¾ç¤º
- [ ] è´¦å·è¾“å…¥æ­£å¸¸
- [ ] å¯†ç è¾“å…¥æ­£å¸¸
- [ ] ç™»å½•æŒ‰é’®æ­£å¸¸
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 2. æœºæ„é€‰æ‹©é¡µé¢

- [ ] æœºæ„åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æœºæ„é€‰æ‹©æ­£å¸¸
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 3. è·¯ç”±è·³è½¬

- [ ] ç™»å½•æˆåŠŸåè·³è½¬æ­£å¸¸
- [ ] é”™è¯¯åè·³è½¬æ­£å¸¸
- [ ] æœºæ„é€‰æ‹©åè·³è½¬æ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### å“åº”æ—¶é—´

| ç«¯ç‚¹ | å¹³å‡å“åº”æ—¶é—´ | æœ€å¤§å“åº”æ—¶é—´ | æœ€å°å“åº”æ—¶é—´ |
|------|------------|------------|------------|
| POST /auth/api/v1/login | __________ ms | __________ ms | __________ ms |
| GET /auth/api/v1/institutions/search | __________ ms | __________ ms | __________ ms |

---

## ğŸ” æ—¥å¿—ç›‘æ§

### é”™è¯¯æ—¥å¿—

**é”™è¯¯æ•°é‡**ï¼š__________

**æœ€è¿‘é”™è¯¯**ï¼š
```
__________
__________
__________
```

---

### ç™»å½•ç»Ÿè®¡

**ç™»å½•æˆåŠŸ**ï¼š__________  
**ç™»å½•å¤±è´¥**ï¼š__________  
**æˆåŠŸç‡**ï¼š__________%

**æœ€è¿‘ç™»å½•å¤±è´¥**ï¼š
```
__________
__________
__________
```

---

## âœ… æµ‹è¯•ç»“è®º

### åŠŸèƒ½éªŒè¯

- [ ] æ‰€æœ‰ç«¯ç‚¹å“åº”æ ¼å¼æ­£ç¡®
- [ ] æ‰€æœ‰ç«¯ç‚¹ HTTP çŠ¶æ€ç æ­£ç¡®
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] ä¸šåŠ¡é€»è¾‘æ­£ç¡®

### å‰ç«¯é›†æˆ

- [ ] å‰ç«¯ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯æœºæ„é€‰æ‹©åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯é”™è¯¯æç¤ºæ­£å¸¸
- [ ] å‰ç«¯è·¯ç”±è·³è½¬æ­£å¸¸

### æ€§èƒ½

- [ ] å“åº”æ—¶é—´æ­£å¸¸
- [ ] æ— æ€§èƒ½é—®é¢˜
- [ ] æ— å†…å­˜æ³„æ¼

### æ—¥å¿—

- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] æ— å¼‚å¸¸é”™è¯¯
- [ ] é”™è¯¯ç‡æ­£å¸¸

---

## ğŸ“ é—®é¢˜è®°å½•

1. 
2. 
3. 

---

## ğŸ¯ æœ€ç»ˆç¡®è®¤

**æµ‹è¯•å®Œæˆæ—¥æœŸ**ï¼š__________

**æµ‹è¯•äººå‘˜ç­¾å**ï¼š__________

**æµ‹è¯•ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

