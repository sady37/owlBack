# Device ç«¯ç‚¹ç«¯åˆ°ç«¯æµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•æ—¥æœŸ**ï¼š__________  
**æµ‹è¯•äººå‘˜**ï¼š__________  
**æµ‹è¯•ç¯å¢ƒ**ï¼š__________  
**æœåŠ¡åœ°å€**ï¼š`http://localhost:8080`

---

## ğŸš€ æµ‹è¯•å‡†å¤‡

### 1. æœåŠ¡å¯åŠ¨

```bash
cd /Users/sady3721/project/owlBack
docker-compose up -d wisefido-data
```

### 2. éªŒè¯æœåŠ¡çŠ¶æ€

```bash
curl http://localhost:8080/health
```

**ç»“æœ**ï¼šâœ… / âŒ

### 3. å‡†å¤‡æµ‹è¯•æ•°æ®

```sql
-- åˆ›å»ºæµ‹è¯•ç§Ÿæˆ·
INSERT INTO tenants (tenant_id, tenant_name, domain, status)
VALUES ('00000000-0000-0000-0000-000000000002', 'Test Device Tenant', 'test-device.local', 'active')
ON CONFLICT (tenant_id) DO NOTHING;

-- åˆ›å»ºè®¾å¤‡åº“å­˜
INSERT INTO device_store (device_store_id, tenant_id, device_type, serial_number, uid, status)
VALUES ('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000002', 'Radar', 'TEST-SERIAL-001', 'TEST-UID-001', 'available')
ON CONFLICT (device_store_id) DO NOTHING;

-- åˆ›å»ºè®¾å¤‡
INSERT INTO devices (device_id, tenant_id, device_store_id, device_name, serial_number, uid, status, business_access, monitoring_enabled)
VALUES (
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002',
  'Test Device',
  'TEST-SERIAL-001',
  'TEST-UID-001',
  'online',
  'approved',
  true
)
ON CONFLICT (device_id) DO UPDATE SET
  device_name = EXCLUDED.device_name,
  status = EXCLUDED.status,
  business_access = EXCLUDED.business_access,
  monitoring_enabled = EXCLUDED.monitoring_enabled;
```

**ç»“æœ**ï¼šâœ… / âŒ

---

## ğŸ” æµ‹è¯•ç”¨ä¾‹

### 1. GET /admin/api/v1/devices

#### 1.1 æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices?tenant_id=00000000-0000-0000-0000-000000000002&page=1&size=20" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": {
    "items": [...],
    "total": 1
  }
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 1.2 è¿‡æ»¤æ¡ä»¶

**æŒ‰çŠ¶æ€è¿‡æ»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices?tenant_id=00000000-0000-0000-0000-000000000002&status=online" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**æŒ‰ä¸šåŠ¡è®¿é—®æƒé™è¿‡æ»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices?tenant_id=00000000-0000-0000-0000-000000000002&business_access=approved" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**æœç´¢è®¾å¤‡**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices?tenant_id=00000000-0000-0000-0000-000000000002&search_type=device_name&search_keyword=Test" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

---

### 2. GET /admin/api/v1/devices/:id

#### 2.1 æŸ¥è¯¢è®¾å¤‡è¯¦æƒ…

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices/00000000-0000-0000-0000-000000000002" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": {
    "device_id": "00000000-0000-0000-0000-000000000002",
    "device_name": "Test Device",
    ...
  }
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 2.2 è®¾å¤‡ä¸å­˜åœ¨

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X GET "http://localhost:8080/admin/api/v1/devices/00000000-0000-0000-0000-000000000000" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": -1,
  "type": "error",
  "message": "device not found",
  "result": null
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 3. PUT /admin/api/v1/devices/:id

#### 3.1 æ›´æ–°è®¾å¤‡

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X PUT "http://localhost:8080/admin/api/v1/devices/00000000-0000-0000-0000-000000000002" \
  -H "Content-Type: application/json" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002" \
  -d '{
    "device_name": "Updated Device Name",
    "status": "offline",
    "business_access": "pending",
    "monitoring_enabled": false
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": {
    "success": true
  }
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

#### 3.2 è®¾å¤‡ç»‘å®šéªŒè¯

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X PUT "http://localhost:8080/admin/api/v1/devices/00000000-0000-0000-0000-000000000002" \
  -H "Content-Type: application/json" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002" \
  -d '{
    "unit_id": "00000000-0000-0000-0000-000000000001"
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": -1,
  "type": "error",
  "message": "invalid binding: unit_id provided but bound_room_id/bound_bed_id missing",
  "result": null
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 4. DELETE /admin/api/v1/devices/:id

#### 4.1 åˆ é™¤è®¾å¤‡

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
curl -X DELETE "http://localhost:8080/admin/api/v1/devices/00000000-0000-0000-0000-000000000002" \
  -H "X-Tenant-Id: 00000000-0000-0000-0000-000000000002"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "code": 2000,
  "type": "success",
  "message": "ok",
  "result": {
    "success": true
  }
}
```

**å®é™…å“åº”**ï¼š
```json
{
  "code": __________,
  "type": __________,
  "message": __________,
  "result": __________
}
```

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

## ğŸ“Š æµ‹è¯•ç»Ÿè®¡

| æµ‹è¯•ç”¨ä¾‹ | çŠ¶æ€ | å¤‡æ³¨ |
|---------|------|------|
| GET /admin/api/v1/devices - æŸ¥è¯¢åˆ—è¡¨ | âœ…/âŒ | |
| GET /admin/api/v1/devices - è¿‡æ»¤æ¡ä»¶ | âœ…/âŒ | |
| GET /admin/api/v1/devices/:id - æŸ¥è¯¢è¯¦æƒ… | âœ…/âŒ | |
| GET /admin/api/v1/devices/:id - è®¾å¤‡ä¸å­˜åœ¨ | âœ…/âŒ | |
| PUT /admin/api/v1/devices/:id - æ›´æ–°è®¾å¤‡ | âœ…/âŒ | |
| PUT /admin/api/v1/devices/:id - ç»‘å®šéªŒè¯ | âœ…/âŒ | |
| DELETE /admin/api/v1/devices/:id - åˆ é™¤è®¾å¤‡ | âœ…/âŒ | |

**æ€»æµ‹è¯•æ•°**ï¼š7  
**é€šè¿‡**ï¼š__________  
**å¤±è´¥**ï¼š__________  
**é€šè¿‡ç‡**ï¼š__________%

---

## ğŸ” å‰ç«¯é›†æˆæµ‹è¯•

### 1. è®¾å¤‡åˆ—è¡¨é¡µé¢

- [ ] è®¾å¤‡åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] è¿‡æ»¤æ¡ä»¶æ­£å¸¸
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 2. è®¾å¤‡è¯¦æƒ…é¡µé¢

- [ ] è®¾å¤‡è¯¦æƒ…æ­£å¸¸æ˜¾ç¤º
- [ ] è®¾å¤‡ä¿¡æ¯æ­£ç¡®
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 3. è®¾å¤‡æ›´æ–°åŠŸèƒ½

- [ ] è®¾å¤‡æ›´æ–°è¡¨å•æ­£å¸¸
- [ ] è®¾å¤‡æ›´æ–°æˆåŠŸ
- [ ] ç»‘å®šéªŒè¯æ­£å¸¸
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

### 4. è®¾å¤‡åˆ é™¤åŠŸèƒ½

- [ ] è®¾å¤‡åˆ é™¤æˆåŠŸ
- [ ] åˆ é™¤åè®¾å¤‡ä¸å†æ˜¾ç¤º
- [ ] é”™è¯¯æç¤ºæ­£å¸¸

**ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### å“åº”æ—¶é—´

| ç«¯ç‚¹ | å¹³å‡å“åº”æ—¶é—´ | æœ€å¤§å“åº”æ—¶é—´ | æœ€å°å“åº”æ—¶é—´ |
|------|------------|------------|------------|
| GET /admin/api/v1/devices | __________ ms | __________ ms | __________ ms |
| GET /admin/api/v1/devices/:id | __________ ms | __________ ms | __________ ms |
| PUT /admin/api/v1/devices/:id | __________ ms | __________ ms | __________ ms |
| DELETE /admin/api/v1/devices/:id | __________ ms | __________ ms | __________ ms |

---

## ğŸ” æ—¥å¿—ç›‘æ§

### é”™è¯¯æ—¥å¿—

**é”™è¯¯æ•°é‡**ï¼š__________

**æœ€è¿‘é”™è¯¯**ï¼š
```
__________
__________
__________
```

---

## âœ… æµ‹è¯•ç»“è®º

### åŠŸèƒ½éªŒè¯

- [ ] æ‰€æœ‰ç«¯ç‚¹å“åº”æ ¼å¼æ­£ç¡®
- [ ] æ‰€æœ‰ç«¯ç‚¹ HTTP çŠ¶æ€ç æ­£ç¡®
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] ä¸šåŠ¡é€»è¾‘æ­£ç¡®

### å‰ç«¯é›†æˆ

- [ ] å‰ç«¯è®¾å¤‡åˆ—è¡¨åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯è®¾å¤‡è¯¦æƒ…åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯è®¾å¤‡æ›´æ–°åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯è®¾å¤‡åˆ é™¤åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯é”™è¯¯æç¤ºæ­£å¸¸

### æ€§èƒ½

- [ ] å“åº”æ—¶é—´æ­£å¸¸
- [ ] æ— æ€§èƒ½é—®é¢˜
- [ ] æ— å†…å­˜æ³„æ¼

### æ—¥å¿—

- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] æ— å¼‚å¸¸é”™è¯¯
- [ ] é”™è¯¯ç‡æ­£å¸¸

---

## ğŸ“ é—®é¢˜è®°å½•

1. 
2. 
3. 

---

## ğŸ¯ æœ€ç»ˆç¡®è®¤

**æµ‹è¯•å®Œæˆæ—¥æœŸ**ï¼š__________

**æµ‹è¯•äººå‘˜ç­¾å**ï¼š__________

**æµ‹è¯•ç»“æœ**ï¼šâœ… é€šè¿‡ / âŒ å¤±è´¥

**å¤‡æ³¨**ï¼š

